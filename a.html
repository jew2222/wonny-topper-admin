<!doctype html>
<html class="boxed">

<head>

<!-- Basic -->
<meta charset="UTF-8">

<title></title>

<!-- Mobile Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<!-- Web Fonts  -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800|Shadows+Into+Light"
	rel="stylesheet" type="text/css">

<!-- Vendor CSS -->
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap/css/bootstrap.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/font-awesome/css/font-awesome.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/magnific-popup/magnific-popup.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-datepicker/css/bootstrap-datepicker3.css" />

<!-- table advanced CSS -->
<link rel="stylesheet" href="/resources/admin/assets/vendor/jquery-ui/jquery-ui.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/jquery-ui/jquery-ui.theme.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/select2/css/select2.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/select2-bootstrap-theme/select2-bootstrap.min.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-multiselect/bootstrap-multiselect.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-colorpicker/css/bootstrap-colorpicker.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-timepicker/css/bootstrap-timepicker.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/dropzone/basic.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/dropzone/dropzone.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-markdown/css/bootstrap-markdown.min.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/summernote/summernote.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/codemirror/lib/codemirror.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/codemirror/theme/monokai.css" />

<!-- form - advanced CSS -->
<link rel="stylesheet" href="/resources/admin/assets/vendor/jquery-ui/jquery-ui.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/jquery-ui/jquery-ui.theme.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-multiselect/bootstrap-multiselect.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-colorpicker/css/bootstrap-colorpicker.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-timepicker/css/bootstrap-timepicker.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/dropzone/basic.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/dropzone/dropzone.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/bootstrap-markdown/css/bootstrap-markdown.min.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/summernote/summernote.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/codemirror/lib/codemirror.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/codemirror/theme/monokai.css" />

<!-- Theme CSS -->
<link rel="stylesheet" href="/resources/admin/assets/stylesheets/theme.css" />
<!-- Skin CSS -->
<link rel="stylesheet" href="/resources/admin/assets/stylesheets/skins/default.css" />
<!-- Theme Custom CSS -->
<link rel="stylesheet" href="/resources/admin/assets/stylesheets/theme-custom.css">
<!-- Head Libs -->
<script src="/resources/admin/assets/vendor/modernizr/modernizr.js"></script>
<link rel="stylesheet" href="/resources/admin/assets/vendor/select2/css/select2.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/select2-bootstrap-theme/select2-bootstrap.min.css" />
<link rel="stylesheet" href="/resources/admin/assets/vendor/jquery-datatables-bs3/assets/css/datatables.css" />

<!-- Admin CSS -->
<link rel="stylesheet" href="/resources/admin/css/common.css" />
<link rel="stylesheet" href="/resources/admin/css/gnb.css" />

</head>

<body>
	<!-- WRAP -->
	<section class="body">
		<!-- HEADER -->
		<%@ include file="include/header_admin.jsp" %>
		<!-- // HEADER -->

		<div class="inner-wrapper">
			<!-- GNB SIDEBAR-->
			<%@ include file="include/sidebar_admin.jsp" %>
			<!-- // GNB SIDEBAR-->

			<section role="main" class="content-body" style="background-color: white;">
				<div class="top">
					<h1 class="ib">메인 배너 관리</h1>
					<h6 class="ib align-right">HOME > 게시글 관리 > 메인 배너 관리</h6>
				</div>

				<hr />
				<!-- 검색창 패널 -->
				<section class="panel search-panel mb-xs">
					<div class="panel-body search-panel-body">
						<form class="form-horizontal form-bordered">
							<div class="form-group">
								<label class="col-md-2 control-label">등록일</label>

								<div class="col-md-6">
									<div class="input-daterange input-group" data-plugin-datepicker>
										<input type="text" class="form-control" name="start">
										<span class="input-group-addon search-panel-icon">
											<i class="fa fa-calendar"></i>
										</span>
										<span class="input-group-addon search-panel-icon">
											~
										</span>
										<input type="text" class="form-control" name="end">
										<span class="input-group-addon search-panel-icon">
											<i class="fa fa-calendar"></i>
										</span>
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-md-2 control-label">노출여부</label>

								<div class="col-md-8">
									<label class="radio-inline">
										<input type="radio" name="exposureStatus" id="inlineRadio1"
											value="option1" checked> 전체
									</label>
									<label class="radio-inline">
										<input type="radio" name="exposureStatus" id="inlineRadio2"
											value="option2"> 노출
									</label>
									<label class="radio-inline">
										<input type="radio" name="exposureStatus" id="inlineRadio3"
											value="option3"> 비노출
									</label>

								</div>
							</div>
							<div class="form-group">
								<label class="col-md-2 control-label">검색어</label>
								<div class="col-sm-10 search-input">
									<input type="text" id="keyword" class="form-control"  placeholder="배너명 검색하기">
								</div>
							</div>
						</form>
					</div>
				</section>
				<!--// 검색창 패널 -->
				<!-- tool btn -->
				<div class="col-md-3 admin-btn-tool align-right tool-btn ib">
					<button type="button" class="mb-xs mt-xs mr-xs btn btn-primary" onClick="movePage(1)">검색</button>
				</div>

				<div class="admin-btn-tool align-left">
					<div class="tool-select ib">
						<select id="orderSelect" class="form-control" name="orderSelect">
							<option value="등록일 ↓">등록일 ↓</option>
							<option value="등록일 ↑">등록일 ↑</option>
						</select>
					</div>

					<div class="tool-btn ib">
						<button type="button" class="mb-xs mr-xs ml-lg btn btn-sm btn-default">선택
							삭제</button>
					</div>


					<div class=" align-right tool-btn ib">
						<a href="/admin/brand/add" class="mb-xs mt-xs mr-xs btn btn-primary ">배너 등록</a>
						<button type="button" class="mb-xs mt-xs mr-xs btn btn-primary ">저장</button>
					</div>
				</div>


				<!-- //tool btn  -->
				<!-- 목록 테이블 패널 -->
				<section class="panel">
					<div class="panel-body table-panel-body">
						<table class="admin-board-table table table-bordered table-striped mb-none"
							id="">
							<thead>
								<tr>
									<th>
										<input type="checkbox" checked="" id="checkboxExample2">
									</th>
									<th>idx</th>
									<th>배너명</th>
									<th class="hidden-xs">기간</th>
									<th class="hidden-xs">등록일</th>
									<th>노출여부</th>
								</tr>
							</thead>
							<tbody>
							
                        	<c:set var="params" value="${params}" />
								<c:forEach items="${response.list}" var="row">
									<tr class="table-contents" data-idx="${row.bannerIdx}">
									
										<td>
											<input type="checkbox" id="checkboxExample2">
										</td>
										<td>${row.bannerIdx}</td>
										<td>${row.bannerName}</td>
										<td class="center hidden-xs">${row.startDate} ~ ${row.endDate}</td>
										<td class="center hidden-xs">${row.regDate}</td>
										<td>
											<div class="switch switch-primary">
												<c:set var="ex" value="${row.exposureString}" />
												<c:choose>      
											   		 <c:when test="${ex eq 'E'}"> 
											   		 	<input type="checkbox" name="switch" data-plugin-ios-switch checked="checked" /> 
											   		 </c:when>
											   		 <c:when test="${ex eq 'N'}">  
											   		 	<input type="checkbox" name="switch" data-plugin-ios-switch" />
											   		 </c:when>
			                        			</c:choose>
											</div>
										</td>
									</tr>
								</c:forEach>
							</tbody>
						</table>
						
						<div class="panel-footer">
						<c:set var="pagination" value="${response.pagination}" />
							<div class="align-left">
								Showing ${params.page} to ${params.page + params.pageSize} of ${pagination.endPage} entries
							</div>
							
							<ul class="pagination">
								<li class="prev disabled">
									<a class="prev" onclick="movePageArrow(-1)">
										<i class="fa fa-chevron-left"></i>
									</a>
								</li>
								
								<c:forEach begin="${pagination.startPage}" end="${pagination.endPage}" step="1" var="var1">
			                    	 <c:choose> 
			                    		<c:when test="${var1 ne params.page}"> 
			                    			<li>
												<a href="javascript:void(0);" onclick="movePage(${var1});">var1</a>
											</li>
					                   	</c:when>
					                   	<c:otherwise>
						                   	<li class="active">
												<a href="">${var1}</a>
											</li>
					                   	</c:otherwise> 	
				                   	 </c:choose>
				                </c:forEach>

			                 	<c:choose>
				                 	<c:when test="${pagination.existNextPage}">
					                 	<c:set var="i" value="+1"/>
				                 	</c:when>
				                 	<c:otherwise>
					                 	<c:set var="i" value="+0"/>
				                 	</c:otherwise>
			                 	</c:choose>
								<li class="next">
									<a class="next" onclick="movePageArrow(i)">
										<i class="fa fa-chevron-right"></i>
									</a>
								</li>
							</ul>

						</div>
					</div>
				</section>
				<!--// 목록 테이블 패널  -->
				</section>
		</div>
</section>
<!-- // WRAP -->
	

<!-- Vendor -->
<script src="/resources/admin/assets/vendor/jquery/jquery.js"></script>



<script
	src="/resources/admin/assets/vendor/jquery-browser-mobile/jquery.browser.mobile.js"></script>
<script src="/resources/admin/assets/vendor/bootstrap/js/bootstrap.js"></script>
<script src="/resources/admin/assets/vendor/nanoscroller/nanoscroller.js"></script>
<script
	src="/resources/admin/assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script src="/resources/admin/assets/vendor/magnific-popup/jquery.magnific-popup.js"></script>
<script src="/resources/admin/assets/vendor/jquery-placeholder/jquery-placeholder.js"></script>

<!-- table advanced Specific Page Vendor -->
<script src="/resources/admin/assets/vendor/select2/js/select2.js"></script>
<script
	src="/resources/admin/assets/vendor/jquery-datatables/media/js/jquery.dataTables.js"></script>
<script
	src="/resources/admin/assets/vendor/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js"></script>
<script src="/resources/admin/assets/vendor/jquery-datatables-bs3/assets/js/datatables.js"></script>

<!-- Theme Base, Components and Settings -->
<script src="/resources/admin/assets/javascripts/theme.js"></script>

<!-- Theme Custom -->
<script src="/resources/admin/assets/javascripts/theme.custom.js"></script>

<!-- Theme Initialization Files -->
<script src="/resources/admin/assets/javascripts/theme.init.js"></script>

<!-- Examples: table advanced -->
<script src="/resources/admin/assets/javascripts/tables/examples.datatables.default.js"></script>
<script
	src="/resources/admin/assets/javascripts/tables/examples.datatables.row.with.details.js"></script>
<script src="/resources/admin/assets/javascripts/tables/examples.datatables.tabletools.js"></script>

<!-- form advanced Specific Page Vendor -->
<script src="/resources/admin/assets/vendor/jquery-ui/jquery-ui.js"></script>
<script src="/resources/admin/assets/vendor/jqueryui-touch-punch/jqueryui-touch-punch.js"></script>

<script
	src="/resources/admin/assets/vendor/bootstrap-multiselect/bootstrap-multiselect.js"></script>
<script src="/resources/admin/assets/vendor/jquery-maskedinput/jquery.maskedinput.js"></script>
<script src="/resources/admin/assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>
<script
	src="/resources/admin/assets/vendor/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
<script src="/resources/admin/assets/vendor/bootstrap-timepicker/bootstrap-timepicker.js"></script>
<script src="/resources/admin/assets/vendor/fuelux/js/spinner.js"></script>
<script src="/resources/admin/assets/vendor/dropzone/dropzone.js"></script>
<script src="/resources/admin/assets/vendor/bootstrap-markdown/js/markdown.js"></script>
<script src="/resources/admin/assets/vendor/bootstrap-markdown/js/to-markdown.js"></script>
<script src="/resources/admin/assets/vendor/bootstrap-markdown/js/bootstrap-markdown.js"></script>
<script src="/resources/admin/assets/vendor/codemirror/lib/codemirror.js"></script>
<script src="/resources/admin/assets/vendor/codemirror/addon/selection/active-line.js"></script>
<script src="/resources/admin/assets/vendor/codemirror/addon/edit/matchbrackets.js"></script>
<script src="/resources/admin/assets/vendor/codemirror/mode/javascript/javascript.js"></script>
<script src="/resources/admin/assets/vendor/codemirror/mode/xml/xml.js"></script>
<script src="/resources/admin/assets/vendor/codemirror/mode/htmlmixed/htmlmixed.js"></script>
<script src="/resources/admin/assets/vendor/codemirror/mode/css/css.js"></script>
<script src="/resources/admin/assets/vendor/summernote/summernote.js"></script>
<script src="/resources/admin/assets/vendor/bootstrap-maxlength/bootstrap-maxlength.js"></script>
<script src="/resources/admin/assets/vendor/ios7-switch/ios7-switch.js"></script>
<script
	src="/resources/admin/assets/vendor/bootstrap-confirmation/bootstrap-confirmation.js"></script>

<!-- Examples: form advanced -->
<script src="/resources/admin/assets/javascripts/forms/examples.advanced.form.js"></script>


<script>
let orderClick=0;
window.onload = () => {
    setQueryStringParams();
}


const orderSelect = document.querySelector("#orderSelect");
if (orderSelect) {
	 orderSelect.addEventListener("change", () => {
    	 orderClick = orderSelect.options[orderSelect.selectedIndex].innerHTML;  // searchTypeBox.selectedIndex=0;
    	 movePage(1);
     });
}


// 검색 : 쿼리 스트링 파라미터 셋팅
/*
function setQueryStringParams() {

    if ( !location.search ) { 
        return false;
    }

 //	const searchTypeBox= document.getElementById('searchType');
	const keywordInput= document.getElementById('keyword');
	const sortTypeRadio = $('input[name=exposureStatus]');
	

    new URLSearchParams(location.search).forEach((value, key) => { 
   
    	if(key == 'keyword'){
    		 keywordInput.value=value;
    	}
    	
		if(key == 'sortType'){
			$("input:radio[name='exposureStatus']:radio[value='"+value+"']").prop("checked", true);
		}
		
		if(key=='orderType'){  
			orderClick=value; 
			 $("#orderSelect").val(value).prop("selected", true);
		}
		
    })
}
*/
/* 페이지네이션 */
function movePage(page) {  
		
	const keyword = document.getElementById('keyword').value;
	const sortType = $('input[name=exposureStatus]:checked').val();
	//const orderType = $('select[name=orderSelect]').val();
	
	
	const queryParams = {
		page: (page) ? page : 1, //인자가 0일떄는 1, 아니면 인자로 온 페이지번호수 
		recordSize: 20,
		pageSize: 10,
		keyword: keyword,
		sortType: sortType
	}
	if(orderClick!=0){   queryParams["orderType"] = orderClick; } //클릭한적이 있으면 값을 보내줌 
	
	
	location.href = location.pathname + '?' + new URLSearchParams(queryParams).toString();
 }
 
 function movePageArrow(num) { 
	 let loc = new URL(window.location);
	 let page = parseInt(loc.searchParams.get('page'));
	 page+=num;
	 movePage(page);	
}
 

 /* 상세 페이지 팝업
 if (tableData) {
   tableData.forEach((element) => {
     element.addEventListener("click", () => {
    	onClickDetail(element.dataset.idx);
       classDel(popupDimbg, "hidden");
     });
   });
 }
 
 const onClickDetail = async (idx) => {
	  await callApi(idx)
}
 const callApi = async(idx) => {
 	await $.ajax({
 	  	url: '/exhibition/detail.ajax/'+idx,
 	  	contentType : "application/json",
 	  	type: 'GET', 
 	  	data: JSON.stringify({idx}),
 	  	success: (data) =>{
 			  
		  for(let key in data){
			  let target = document.getElementById('exhb_'+key);
			  if(key == 'poster'|| key=='contentsImg'){
				  target.style.backgroundImage = "url('" + data[key] + "')";
				  console.log();
			  }
			  
			  if(target){
				  target.innerHTML=data[key];
			  }
		  }
 
 	  	},
 	 	error: (xhr, status, error) =>{
 			console.log(error)
 			alert("ERROR, 시도 실패")
 	  	},
 	})
 }	

 */
 
	
</script>

</body>

</html>